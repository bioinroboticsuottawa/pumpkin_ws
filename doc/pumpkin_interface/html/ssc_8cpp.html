<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>pumpkin_interface: ssc.cpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_fe81ce83ab0e906ba91aaa83e75f919b.html">pumpkin_interface</a></li><li class="navelem"><a class="el" href="dir_e1b8499bda691502f627688851a19299.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ssc.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;pumpkin_messages/SSCMove.h&quot;</code><br/>
<code>#include &quot;pumpkin_messages/SSCMoveList.h&quot;</code><br/>
<code>#include &quot;pumpkin_messages/SSCMoveCommand.h&quot;</code><br/>
<code>#include &lt;XmlRpcValue.h&gt;</code><br/>
<code>#include &lt;ros/ros.h&gt;</code><br/>
<code>#include &lt;ros/callback_queue.h&gt;</code><br/>
<code>#include &quot;serial/serial.h&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ssc.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="ssc_8cpp__incl.png" border="0" usemap="#ssc_8cpp" alt=""/></div>
</div>
</div>
<p><a href="ssc_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a05b1e012aee4cee6d5036464dde2b5c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#a05b1e012aee4cee6d5036464dde2b5c0">generate_move</a> (const pumpkin_messages::SSCMoveList &amp;move)</td></tr>
<tr class="memdesc:a05b1e012aee4cee6d5036464dde2b5c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auxiliar function to generate the <em>string command</em> based on the respective message command.  <a href="#a05b1e012aee4cee6d5036464dde2b5c0">More...</a><br/></td></tr>
<tr class="separator:a05b1e012aee4cee6d5036464dde2b5c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26c9fb6891642da148559effa122a910"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#a26c9fb6891642da148559effa122a910">moveSSC</a> (pumpkin_messages::SSCMoveCommand::Request &amp;req, pumpkin_messages::SSCMoveCommand::Response &amp;res)</td></tr>
<tr class="memdesc:a26c9fb6891642da148559effa122a910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback service function. Receive a group of arm commands and send it to SSC.  <a href="#a26c9fb6891642da148559effa122a910">More...</a><br/></td></tr>
<tr class="separator:a26c9fb6891642da148559effa122a910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97beb248f866a8235fe9a6e092b1af5c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#a97beb248f866a8235fe9a6e092b1af5c">setupSSC</a> ()</td></tr>
<tr class="memdesc:a97beb248f866a8235fe9a6e092b1af5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to setup the SSC.  <a href="#a97beb248f866a8235fe9a6e092b1af5c">More...</a><br/></td></tr>
<tr class="separator:a97beb248f866a8235fe9a6e092b1af5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acab6f414470b7c070947ee07af7446a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#acab6f414470b7c070947ee07af7446a4">debug_flag</a> = false</td></tr>
<tr class="separator:acab6f414470b7c070947ee07af7446a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f544d1dddae0a116814579184d80f11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#a9f544d1dddae0a116814579184d80f11">max_pulse</a> [32]</td></tr>
<tr class="separator:a9f544d1dddae0a116814579184d80f11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5faaf657a22135b8dc54c83052574f9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#ab5faaf657a22135b8dc54c83052574f9">min_pulse</a> [32]</td></tr>
<tr class="separator:ab5faaf657a22135b8dc54c83052574f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0baa2a14fddc9486557407a0f5813b8f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#a0baa2a14fddc9486557407a0f5813b8f">port</a></td></tr>
<tr class="separator:a0baa2a14fddc9486557407a0f5813b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fa986675b5936d8ab507ea2802b319d"><td class="memItemLeft" align="right" valign="top">serial::Serial *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ssc_8cpp.html#a2fa986675b5936d8ab507ea2802b319d">ssc</a> = nullptr</td></tr>
<tr class="separator:a2fa986675b5936d8ab507ea2802b319d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a05b1e012aee4cee6d5036464dde2b5c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void generate_move </td>
          <td>(</td>
          <td class="paramtype">const pumpkin_messages::SSCMoveList &amp;&#160;</td>
          <td class="paramname"><em>move</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Auxiliar function to generate the <em>string command</em> based on the respective message command. </p>
<p>This function will also check the configured bounds, and also check if it will send the <em>string</em> to the SSC, or to the screen.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">move</td><td>The movement, in message format. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00054">54</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The main function of the node.</p>
<p>It will try to setup the SSC. If it fails, this node will go down.</p>
<p>If the SSC is up, it will setup the parameters for the limits.</p>
<p>And then, runs the both server and subscriber. Each with separated callback queues. </p>

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00221">221</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a26c9fb6891642da148559effa122a910"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool moveSSC </td>
          <td>(</td>
          <td class="paramtype">pumpkin_messages::SSCMoveCommand::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pumpkin_messages::SSCMoveCommand::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback service function. Receive a group of arm commands and send it to SSC. </p>
<p>First, this function see if the SSC is idle. If it is busy, it waits. But if the board doesn't respont, it will try to restart the SSC.</p>
<p>Then, it will try to send the message.</p>
<p>/param req The message request. It consists a list of movement and the time to do it. /param res The response should be the state of the SSC channels. But it is unused for now.</p>
<dl class="section return"><dt>Returns</dt><dd>False if it will try to reconnect and fails (in case of it seeing the board is not busy nor idle), or if this doesn't suceeded sending the command directly to SSC. True otherwise. </dd></dl>

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00104">104</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a97beb248f866a8235fe9a6e092b1af5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool setupSSC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to setup the SSC. </p>
<p>This function will seek for any connected serial port with a specific device location (by default is /dev/ttyUSB) If any device is encountered, this will try to see if it is an SSC. If it is, this function creates the Serial object. And exits successfully</p>
<dl class="section return"><dt>Returns</dt><dd>True if it succeeded in connecting to an SSC. False otherwise. </dd></dl>

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00142">142</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="acab6f414470b7c070947ee07af7446a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool debug_flag = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00027">27</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9f544d1dddae0a116814579184d80f11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int max_pulse[32]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00043">43</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab5faaf657a22135b8dc54c83052574f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int min_pulse[32]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00042">42</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0baa2a14fddc9486557407a0f5813b8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string port</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00026">26</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2fa986675b5936d8ab507ea2802b319d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">serial::Serial* ssc = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>The SSC Node </h1>
<p>This node is for sending commands to SSC.</p>
<p>As the SSC is a serial device, this node is intended to check the serial connections regularly, and sets the string command (yeah, the SSC operates sending string commands), checking the bounds in the middle time.</p>
<p>This node will shut off if it doesn't find any SSC connected on the startup. But the robot (and also the SSC) should be turned off after that initialization.</p>
<p>Each time a command is sent, it will check if SSC is running and if it is not busy. </p>

<p>Definition at line <a class="el" href="ssc_8cpp_source.html#l00025">25</a> of file <a class="el" href="ssc_8cpp_source.html">ssc.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/pumpkin_interface">pumpkin_interface</a><br />
Author(s): </br />
<small>autogenerated on Wed Nov 4 2015 16:13:15</small>
</div>
</body>
</html>
