<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>pumpkin_interface: file_server.cpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_fe81ce83ab0e906ba91aaa83e75f919b.html">pumpkin_interface</a></li><li class="navelem"><a class="el" href="dir_e1b8499bda691502f627688851a19299.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">file_server.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br/>
<code>#include &quot;file_type.h&quot;</code><br/>
<code>#include &quot;pumpkin_messages/Files.h&quot;</code><br/>
<code>#include &quot;pumpkin_messages/FilesHandler.h&quot;</code><br/>
<code>#include &lt;boost/filesystem.hpp&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for file_server.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="file__server_8cpp__incl.png" border="0" usemap="#file__server_8cpp" alt=""/></div>
</div>
</div>
<p><a href="file__server_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac05da38aecabf0fe8847157d73794168"><td class="memItemLeft" align="right" valign="top">constexpr std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_8cpp.html#ac05da38aecabf0fe8847157d73794168">CONFIG_FOLDER</a> (&quot;/config&quot;)</td></tr>
<tr class="separator:ac05da38aecabf0fe8847157d73794168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f20ea72e909b73aa1f8b60e705938ae"><td class="memItemLeft" align="right" valign="top">constexpr std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_8cpp.html#a4f20ea72e909b73aa1f8b60e705938ae">DESCRIPTION_FOLDER</a> (&quot;_description/robots&quot;)</td></tr>
<tr class="separator:a4f20ea72e909b73aa1f8b60e705938ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693ef53fb5c0cd083d09885c6b63e7cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_8cpp.html#a693ef53fb5c0cd083d09885c6b63e7cc">get_files_recursively</a> (const bfs::path &amp;dir, const std::string &amp;ext, std::vector&lt; FileList &gt; &amp;found)</td></tr>
<tr class="memdesc:a693ef53fb5c0cd083d09885c6b63e7cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a helper function to check, recursively, for any file that have a specific extension.  <a href="#a693ef53fb5c0cd083d09885c6b63e7cc">More...</a><br/></td></tr>
<tr class="separator:a693ef53fb5c0cd083d09885c6b63e7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50fdb723224cda2f8999816411d92b93"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_8cpp.html#a50fdb723224cda2f8999816411d92b93">HandleFiles</a> (FilesHandler::Request &amp;req, FilesHandler::Response &amp;res)</td></tr>
<tr class="memdesc:a50fdb723224cda2f8999816411d92b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a callback function to the <em>file_handler</em> service.  <a href="#a50fdb723224cda2f8999816411d92b93">More...</a><br/></td></tr>
<tr class="separator:a50fdb723224cda2f8999816411d92b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1acd039dbb04a5f941827b66b6de5430"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_8cpp.html#a1acd039dbb04a5f941827b66b6de5430">ListFiles</a> (Files::Request &amp;req, Files::Response &amp;res)</td></tr>
<tr class="memdesc:a1acd039dbb04a5f941827b66b6de5430"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the callback function to the <em>file_lister</em> service.  <a href="#a1acd039dbb04a5f941827b66b6de5430">More...</a><br/></td></tr>
<tr class="separator:a1acd039dbb04a5f941827b66b6de5430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main function of the node.  <a href="#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br/></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7a334bb869980f1b7a777f353f99a43"><td class="memItemLeft" align="right" valign="top">constexpr std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_8cpp.html#aa7a334bb869980f1b7a777f353f99a43">PLAYBACK_FOLDER</a> (&quot;/playback&quot;)</td></tr>
<tr class="separator:aa7a334bb869980f1b7a777f353f99a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a39d197b03843658d7312accdeaa36975"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_8cpp.html#a39d197b03843658d7312accdeaa36975">pumpkin_path</a></td></tr>
<tr class="separator:a39d197b03843658d7312accdeaa36975"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac05da38aecabf0fe8847157d73794168"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::string CONFIG_FOLDER </td>
          <td>(</td>
          <td class="paramtype">&quot;/config&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4f20ea72e909b73aa1f8b60e705938ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::string DESCRIPTION_FOLDER </td>
          <td>(</td>
          <td class="paramtype">&quot;_description/robots&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a693ef53fb5c0cd083d09885c6b63e7cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_files_recursively </td>
          <td>(</td>
          <td class="paramtype">const bfs::path &amp;&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>ext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; FileList &gt; &amp;&#160;</td>
          <td class="paramname"><em>found</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a helper function to check, recursively, for any file that have a specific extension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir</td><td>The directory for look for </td></tr>
    <tr><td class="paramname">ext</td><td>The extension of files to look for </td></tr>
    <tr><td class="paramname">found</td><td>Auxiliar parameter to use for the tree structure, and also the result of this function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="file__server_8cpp_source.html#l00033">33</a> of file <a class="el" href="file__server_8cpp_source.html">file_server.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a50fdb723224cda2f8999816411d92b93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool HandleFiles </td>
          <td>(</td>
          <td class="paramtype">FilesHandler::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FilesHandler::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a callback function to the <em>file_handler</em> service. </p>
<p>This function will do operations other than listing files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>The requirement. This contains the type of operation, and the name of the file or folder. </td></tr>
    <tr><td class="paramname">res</td><td>The result of that operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False if the folder in the request is not really a folder, or doesn't exists. True otherwise. (Any other error will be reported back to the service caller) </dd></dl>

<p>Definition at line <a class="el" href="file__server_8cpp_source.html#l00078">78</a> of file <a class="el" href="file__server_8cpp_source.html">file_server.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1acd039dbb04a5f941827b66b6de5430"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ListFiles </td>
          <td>(</td>
          <td class="paramtype">Files::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Files::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the callback function to the <em>file_lister</em> service. </p>
<p>This function will seek for a specific type of files, inside the respective configured folder. The seek is recursive (using the <code>get_files_recursively</code> function), and the response will be in form of list (because ROS doesn't support tree structured message). But each index of that list has an reference to other that is the files on the parent folder.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>This is the service request. It is the type of the file. </td></tr>
    <tr><td class="paramname">res</td><td>This is the service response. It will send the FileList.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False if the request type if not one of the supported. True otherwise (Any other error will be reported back to the service caller)</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="file__server_8cpp.html#a693ef53fb5c0cd083d09885c6b63e7cc" title="This is a helper function to check, recursively, for any file that have a specific extension...">get_files_recursively</a> </dd></dl>

<p>Definition at line <a class="el" href="file__server_8cpp_source.html#l00151">151</a> of file <a class="el" href="file__server_8cpp_source.html">file_server.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main function of the node. </p>
<p>It will seek for the pumpkin_path to operate.</p>
<p>After that, it puts the services up.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The number of command arguments </td></tr>
    <tr><td class="paramname">argv</td><td>The list of the command arguments</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if it is OK. An error number otherwise. </dd></dl>

<p>Definition at line <a class="el" href="file__server_8cpp_source.html#l00195">195</a> of file <a class="el" href="file__server_8cpp_source.html">file_server.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa7a334bb869980f1b7a777f353f99a43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::string PLAYBACK_FOLDER </td>
          <td>(</td>
          <td class="paramtype">&quot;/playback&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a39d197b03843658d7312accdeaa36975"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string pumpkin_path</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="file__server_8cpp_source.html#l00024">24</a> of file <a class="el" href="file__server_8cpp_source.html">file_server.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/pumpkin_interface">pumpkin_interface</a><br />
Author(s): </br />
<small>autogenerated on Wed Nov 4 2015 16:13:15</small>
</div>
</body>
</html>
